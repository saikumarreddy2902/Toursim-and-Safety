<!DOCTYPE html>
<html lang="{{ current_language or 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="tourist_login_title">Tourist Login - Tourist Safety System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Fixed Header for Login Pages */
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            height: 70px;
            border-bottom: 2px solid #f8f9fa;
        }
        
        .fixed-header .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            max-width: 1200px;
            margin: 0 auto;
            height: 100%;
        }
        
        .header-left {
            flex: 1;
            display: flex;
            justify-content: flex-start;
        }
        
        .fixed-header .logo {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.5em;
            font-weight: bold;
            color: #007bff;
        }
        
        .header-right {
            flex: 1;
            display: flex;
            justify-content: flex-end;
        }
        
        .language-selection-bar { display:flex; gap:10px; align-items:center; }
        .lang-btn { padding:8px 14px; border:2px solid #007bff; border-radius:10px; background:#fff; color:#007bff; font-weight:600; cursor:pointer; transition:all .2s ease; }
        .lang-btn:hover{ background:#007bff; color:#fff; }
        .lang-btn.active{ background:#007bff; color:#fff; box-shadow:0 4px 12px rgba(0,123,255,.25); }
        
        .sos-btn {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }
        
        .sos-btn:hover {
            background: linear-gradient(135deg, #c82333, #a71e2a);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }
        
        .sos-btn:active {
            transform: translateY(0);
        }
        
        .sos-btn i {
            font-size: 1.2em;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ffc107;
            color: #000;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: bold;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .fixed-header .header-content {
                padding: 8px 15px;
            }
            
            .language-selector-header {
                min-width: 120px;
                font-size: 0.8em;
                padding: 6px 10px;
            }
            
            .sos-btn {
                padding: 8px 15px;
                font-size: 0.8em;
            }
            
            .sos-btn span:not(.notification-badge) {
                display: none;
            }
            
            .fixed-header .logo {
                font-size: 1.2em;
            }
        }
        
        /* Login Container with proper spacing */
        body {
            padding-top: 90px; /* Space for fixed header */
        }
        
        .login-container {
            max-width: 500px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .login-header {
            margin-bottom: 30px;
        }
        
        .login-header i {
            font-size: 4em;
            color: #007bff;
            margin-bottom: 20px;
        }
        
        .login-header h1 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .login-header p {
            color: #6c757d;
            font-size: 1.1em;
        }
        
        .login-form {
            margin: 30px 0;
        }
        
        .input-group {
            position: relative;
            margin-bottom: 25px;
        }
        
        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
            font-size: 1.1em;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .login-btn:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
        }
        
        .login-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .alternative-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }
        
        .alternative-actions a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        
        .alternative-actions a:hover {
            color: #0056b3;
        }
        
        .back-link {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .back-link a {
            color: #6c757d;
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s ease;
        }
        
        .back-link a:hover {
            color: #495057;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #dc3545;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }
        
        .loading-spinner {
            display: none;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Fixed Header for Login Page -->
    <header class="fixed-header">
        <div class="container">
            <div class="header-content">
                <!-- Left side: Language selector -->
                <div class="header-left">
                    <div class="language-selection-bar" aria-label="Select Language">
                        <button type="button" class="lang-btn" id="lang-te" onclick="translateToLanguage('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
                        <button type="button" class="lang-btn" id="lang-en" onclick="translateToLanguage('en')">English</button>
                        <button type="button" class="lang-btn" id="lang-hi" onclick="translateToLanguage('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                    </div>
                </div>
                
                <!-- Center: Logo -->
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    {% if current_language == 'hi' %}
                    <span>‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</span>
                    {% elif current_language == 'ta' %}
                    <span>‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ</span>
                    {% elif current_language == 'te' %}
                    <span>‡∞™‡∞∞‡±ç‡∞Ø‡∞æ‡∞ü‡∞ï ‡∞≠‡∞¶‡±ç‡∞∞‡∞§</span>
                    {% elif current_language == 'bn' %}
                    <span>‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ</span>
                    {% elif current_language == 'mr' %}
                    <span>‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</span>
                    {% elif current_language == 'gu' %}
                    <span>‡™™‡™∞‡´ç‡™Ø‡™ü‡™ï ‡™∏‡™≤‡™æ‡™Æ‡™§‡´Ä</span>
                    {% elif current_language == 'kn' %}
                    <span>‡≤™‡≥ç‡≤∞‡≤µ‡≤æ‡≤∏‡≤ø ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤§‡≥Ü</span>
                    {% elif current_language == 'ml' %}
                    <span>‡¥ü‡µÇ‡¥±‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥∏‡µá‡¥´‡µç‡¥±‡µç‡¥±‡¥ø</span>
                    {% elif current_language == 'pa' %}
                    <span>‡®∏‡©à‡®≤‡®æ‡®®‡©Ä ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü</span>
                    {% elif current_language == 'or' %}
                    <span>‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ü‡¨ï ‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨æ</span>
                    {% elif current_language == 'as' %}
                    <span>‡¶™‡ß∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶∏‡ßÅ‡ß∞‡¶ï‡ßç‡¶∑‡¶æ</span>
                    {% else %}
                    <span>Tourist Safety</span>
                    {% endif %}
                </div>
                
                <!-- Right side: SOS Button with notification indicator -->
                <div class="header-right">
                    <button class="sos-btn" id="sosButton" onclick="triggerSOS()">
                        <i class="fas fa-exclamation-triangle"></i>
                        {% if current_language == 'hi' %}
                        <span>SOS ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</span>
                        {% elif current_language == 'ta' %}
                        <span>SOS ‡Æâ‡Æ§‡Æµ‡Æø</span>
                        {% elif current_language == 'te' %}
                        <span>SOS ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç</span>
                        {% elif current_language == 'bn' %}
                        <span>SOS ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø</span>
                        {% elif current_language == 'mr' %}
                        <span>SOS ‡§Æ‡§¶‡§§</span>
                        {% elif current_language == 'gu' %}
                        <span>SOS ‡™Æ‡™¶‡™¶</span>
                        {% elif current_language == 'kn' %}
                        <span>SOS ‡≤∏‡≤π‡≤æ‡≤Ø</span>
                        {% elif current_language == 'ml' %}
                        <span>SOS ‡¥∏‡¥π‡¥æ‡¥Ø‡¥Ç</span>
                        {% elif current_language == 'pa' %}
                        <span>SOS ‡®Æ‡®¶‡®¶</span>
                        {% elif current_language == 'or' %}
                        <span>SOS ‡¨∏‡¨æ‡¨π‡¨æ‡¨Ø‡≠ç‡≠ü</span>
                        {% elif current_language == 'as' %}
                        <span>SOS ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º</span>
                        {% else %}
                        <span>SOS Help</span>
                        {% endif %}
                        <span class="notification-badge" id="notificationBadge" style="display: none;">!</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
                    <a href="/" data-translate="home">Home</a>
                    <a href="/enhanced_registration" data-translate="register">Register</a>
                    <a href="/app_download" data-translate="download">Download</a>
                    <a href="/digital_id" data-translate="digital_id">Digital ID</a>
                </nav>
                <div class="header-actions">
                    <a href="/admin_login" class="login-btn admin-login-btn">
                        <i class="fas fa-user-shield"></i>
                        <span data-translate="admin_login">Admin Login</span>
                    </a>
                    <button class="emergency-btn" onclick="showEmergencyModal()">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span data-translate="emergency">Emergency</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="back-link">
            <a href="/">
                <i class="fas fa-arrow-left"></i>
                <span data-translate="back_home">‚Üê Back to Home</span>
            </a>
        </div>

        <div class="login-container">
            <div class="login-header">
                <i class="fas fa-user-circle"></i>
                {% if current_language == 'hi' %}
                <h1>‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§≤‡•â‡§ó‡§ø‡§®</h1>
                <p>‡§Ö‡§™‡§®‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
                {% elif current_language == 'ta' %}
                <h1>‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡ÆØ‡Æ£‡Æø ‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æµ‡ØÅ</h1>
                <p>‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡ÆØ‡Æ£‡Æø ‡Æê‡Æü‡Æø‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç</p>
                {% elif current_language == 'te' %}
                <h1>‡∞™‡∞∞‡±ç‡∞Ø‡∞æ‡∞ü‡∞ï ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç</h1>
                <p>‡∞Æ‡±Ä ‡∞≠‡∞¶‡±ç‡∞∞‡∞§‡∞æ ‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç‚Äå‡∞®‡±Å ‡∞Ø‡∞æ‡∞ï‡±ç‡∞∏‡±Ü‡∞∏‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Ä ‡∞ü‡±Ç‡∞∞‡∞ø‡∞∏‡±ç‡∞ü‡±ç ID‡∞®‡∞ø ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</p>
                {% elif current_language == 'bn' %}
                <h1>‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶≤‡¶ó‡¶á‡¶®</h1>
                <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</p>
                {% elif current_language == 'mr' %}
                <h1>‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§≤‡•â‡§ó‡§ø‡§®</h1>
                <p>‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§Ü‡§Ø‡§°‡•Ä ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ</p>
                {% elif current_language == 'gu' %}
                <h1>‡™™‡™∞‡´ç‡™Ø‡™ü‡™ï ‡™≤‡´ã‡™ó‡™ø‡™®</h1>
                <p>‡™§‡™Æ‡™æ‡™∞‡™æ ‡™∏‡™≤‡™æ‡™Æ‡™§‡´Ä ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™°‡™®‡´á ‡™ç‡™ï‡´ç‡™∏‡´á‡™∏ ‡™ï‡™∞‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™™‡™∞‡´ç‡™Ø‡™ü‡™ï ID ‡™¶‡™æ‡™ñ‡™≤ ‡™ï‡™∞‡´ã</p>
                {% elif current_language == 'kn' %}
                <h1>‡≤™‡≥ç‡≤∞‡≤µ‡≤æ‡≤∏‡≤ø ‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç</h1>
                <p>‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤§‡≤æ ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂‡≤ø‡≤∏‡≤≤‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤µ‡≤æ‡≤∏‡≤ø ID ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø</p>
                {% elif current_language == 'ml' %}
                <h1>‡¥ü‡µÇ‡¥±‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥≤‡µã‡¥ó‡¥ø‡µª</h1>
                <p>‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥æ ‡¥°‡¥æ‡¥∑‡µç‡¥¨‡µã‡µº‡¥°‡µç ‡¥Ü‡¥ï‡µç‡¥∏‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ü‡µÇ‡¥±‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ê‡¥°‡¥ø ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï</p>
                {% elif current_language == 'pa' %}
                <h1>‡®∏‡©à‡®≤‡®æ‡®®‡©Ä ‡®≤‡®æ‡®ó‡®á‡®®</h1>
                <p>‡®Ü‡®™‡®£‡©á ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®°‡©à‡®∏‡®º‡®¨‡©ã‡®∞‡®° ‡®§‡©±‡®ï ‡®™‡®π‡©Å‡©∞‡®ö ‡®ï‡®∞‡®® ‡®≤‡®à ‡®Ü‡®™‡®£‡®æ ‡®∏‡©à‡®≤‡®æ‡®®‡©Ä ‡®Ü‡®à‡®°‡©Ä ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã</p>
                {% elif current_language == 'or' %}
                <h1>‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ü‡¨ï ‡¨≤‡¨ó‡¨á‡¨®‡≠ç</h1>
                <p>‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï ‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨æ ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨Ü‡¨ï‡≠ç‡¨∏‡≠á‡¨∏ ‡¨ï‡¨∞‡¨ø‡¨¨‡¨æ‡¨ï‡≠Å ‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï ‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ü‡¨ï ID ‡¨™‡≠ç‡¨∞‡¨¨‡≠á‡¨∂ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å</p>
                {% elif current_language == 'as' %}
                <h1>‡¶™‡ß∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶≤‡¶ó‡¶á‡¶®</h1>
                <p>‡¶Ü‡¶™‡ßã‡¶®‡¶æ‡ß∞ ‡¶∏‡ßÅ‡ß∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶°‡ßá‡¶∂‡ßç‡¶¨‡¶¨'‡ß∞‡ßç‡¶° ‡¶Ö‡¶≠‡¶ø‡¶ó‡¶Æ ‡¶ï‡ß∞‡¶ø‡¶¨‡¶≤‡ßà ‡¶Ü‡¶™‡ßã‡¶®‡¶æ‡ß∞ ‡¶™‡ß∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡ßç‡ß∞‡ß±‡ßá‡¶∂ ‡¶ï‡ß∞‡¶ï</p>
                {% else %}
                <h1>Tourist Login</h1>
                <p>Enter your Tourist ID to access your safety dashboard</p>
                {% endif %}
            </div>

            <div id="message"></div>

            <form class="login-form" id="loginForm">
                <div class="input-group">
                    <i class="fas fa-id-card"></i>
                    <input type="text" id="touristId" name="tourist_id" required
                           {% if current_language == 'hi' %}
                           placeholder="‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á, TST-12345)"
                           {% elif current_language == 'ta' %}
                           placeholder="‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡ÆØ‡Æ£‡Æø ‡Æê‡Æü‡Æø‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç (‡Æé.‡Æï‡Ææ., TST-12345)"
                           {% elif current_language == 'te' %}
                           placeholder="‡∞ü‡±Ç‡∞∞‡∞ø‡∞∏‡±ç‡∞ü‡±ç ID‡∞®‡∞ø ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (‡∞â‡∞¶‡∞æ, TST-12345)"
                           {% elif current_language == 'bn' %}
                           placeholder="‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®, TST-12345)"
                           {% elif current_language == 'mr' %}
                           placeholder="‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§Ü‡§Ø‡§°‡•Ä ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (‡§â‡§¶‡§æ., TST-12345)"
                           {% elif current_language == 'gu' %}
                           placeholder="‡™™‡™∞‡´ç‡™Ø‡™ü‡™ï ID ‡™¶‡™æ‡™ñ‡™≤ ‡™ï‡™∞‡´ã (‡™¶‡™æ.‡™§., TST-12345)"
                           {% elif current_language == 'kn' %}
                           placeholder="‡≤™‡≥ç‡≤∞‡≤µ‡≤æ‡≤∏‡≤ø ID ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø (‡≤â‡≤¶‡≤æ., TST-12345)"
                           {% elif current_language == 'ml' %}
                           placeholder="‡¥ü‡µÇ‡¥±‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ê‡¥°‡¥ø ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï (‡¥â‡¥¶‡¥æ., TST-12345)"
                           {% elif current_language == 'pa' %}
                           placeholder="‡®∏‡©à‡®≤‡®æ‡®®‡©Ä ‡®Ü‡®à‡®°‡©Ä ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã (‡®ú‡®ø‡®µ‡©á‡®Ç, TST-12345)"
                           {% elif current_language == 'or' %}
                           placeholder="‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ü‡¨ï ID ‡¨™‡≠ç‡¨∞‡¨¨‡≠á‡¨∂ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å (‡¨Ø‡≠á‡¨™‡¨∞‡¨ø, TST-12345)"
                           {% elif current_language == 'as' %}
                           placeholder="‡¶™‡ß∞‡ßç‡¶Ø‡¶ü‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡ßç‡ß∞‡ß±‡ßá‡¶∂ ‡¶ï‡ß∞‡¶ï (‡¶Ø‡ßá‡¶®‡ßá, TST-12345)"
                           {% else %}
                           placeholder="Enter Tourist ID (e.g., TST-12345)"
                           {% endif %}>
                </div>

                <button type="submit" class="login-btn" id="loginBtn">
                    <span class="loading-spinner"><i class="fas fa-spinner fa-spin"></i></span>
                    {% if current_language == 'hi' %}
                    <span>‡§≤‡•â‡§ó‡§ø‡§®</span>
                    {% elif current_language == 'ta' %}
                    <span>‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æµ‡ØÅ</span>
                    {% elif current_language == 'te' %}
                    <span>‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç</span>
                    {% elif current_language == 'bn' %}
                    <span>‡¶≤‡¶ó‡¶á‡¶®</span>
                    {% elif current_language == 'mr' %}
                    <span>‡§≤‡•â‡§ó‡§ø‡§®</span>
                    {% elif current_language == 'gu' %}
                    <span>‡™≤‡´ã‡™ó‡™ø‡™®</span>
                    {% elif current_language == 'kn' %}
                    <span>‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç</span>
                    {% elif current_language == 'ml' %}
                    <span>‡¥≤‡µã‡¥ó‡¥ø‡µª</span>
                    {% elif current_language == 'pa' %}
                    <span>‡®≤‡®æ‡®ó‡®á‡®®</span>
                    {% elif current_language == 'or' %}
                    <span>‡¨≤‡¨ó‡¨á‡¨®‡≠ç</span>
                    {% elif current_language == 'as' %}
                    <span>‡¶≤‡¶ó‡¶á‡¶®</span>
                    {% else %}
                    <span>Login</span>
                    {% endif %}
                </button>
            </form>

            <div class="alternative-actions">
                {% if current_language == 'hi' %}
                <p style="color: #6c757d; margin-bottom: 15px;">‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§Ü‡§à‡§°‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?</p>
                <a href="/enhanced_registration?language={{ current_language }}">‡§Ö‡§≠‡•Ä ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç</a>
                <span style="color: #dee2e6;">|</span>
                <a href="/admin_login?language={{ current_language }}">‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö</a>
                {% elif current_language == 'ta' %}
                <p style="color: #6c757d; margin-bottom: 15px;">‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡ÆØ‡Æ£‡Æø ‡Æê‡Æü‡Æø ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà‡ÆØ‡Ææ?</p>
                <a href="/enhanced_registration?language={{ current_language }}">‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç</a>
                <span style="color: #dee2e6;">|</span>
                <a href="/admin_login?language={{ current_language }}">‡Æ®‡Æø‡Æ∞‡Øç‡Æµ‡Ææ‡Æï ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æ≤‡Øç</a>
                {% elif current_language == 'te' %}
                <p style="color: #6c757d; margin-bottom: 15px;">‡∞ü‡±Ç‡∞∞‡∞ø‡∞∏‡±ç‡∞ü‡±ç ID ‡∞≤‡±á‡∞¶‡∞æ?</p>
                <a href="/enhanced_registration?language={{ current_language }}">‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±á ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</a>
                <span style="color: #dee2e6;">|</span>
                <a href="/admin_login?language={{ current_language }}">‡∞Ö‡∞°‡±ç‡∞Æ‡∞ø‡∞®‡±ç ‡∞Ø‡∞æ‡∞ï‡±ç‡∞∏‡±Ü‡∞∏‡±ç</a>
                {% else %}
                <p style="color: #6c757d; margin-bottom: 15px;">Don't have a Tourist ID?</p>
                <a href="/enhanced_registration?language={{ current_language }}">Register Now</a>
                <span style="color: #dee2e6;">|</span>
                <a href="/admin_login?language={{ current_language }}">Admin Access</a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeEmergencyModal()">&times;</span>
            <h2><i class="fas fa-exclamation-triangle"></i> <span data-translate="emergency_services">Emergency Services</span></h2>
            <div class="emergency-grid">
                <a href="tel:100" class="emergency-contact">
                    <i class="fas fa-shield-alt"></i>
                    <span data-translate="police">Police</span>
                    <strong>100</strong>
                </a>
                <a href="tel:102" class="emergency-contact">
                    <i class="fas fa-ambulance"></i>
                    <span data-translate="ambulance">Ambulance</span>
                    <strong>102</strong>
                </a>
                <a href="tel:101" class="emergency-contact">
                    <i class="fas fa-fire"></i>
                    <span data-translate="fire">Fire Service</span>
                    <strong>101</strong>
                </a>
                <a href="tel:1363" class="emergency-contact">
                    <i class="fas fa-map-marked-alt"></i>
                    <span data-translate="tourist_helpline">Tourist Helpline</span>
                    <strong>1363</strong>
                </a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='common.js') }}"></script>
    <script src="{{ url_for('static', filename='global-translation.js') }}"></script>
    <script src="{{ url_for('static', filename='translation.js') }}"></script>
    <script src="{{ url_for('static', filename='caution.js') }}"></script>
    <script>
        // Language change functionality
        function changeLanguage(language) {
            // Redirect to login page with new language parameter
            window.location.href = `/login?language=${language}`;
        }
        // Activate current language button state
        document.addEventListener('DOMContentLoaded', function(){
            setTimeout(() => {
                const lang = (window.globalTranslationManager && window.globalTranslationManager.currentLanguage) || '{{ current_language or "en" }}';
                document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                const activeBtn = document.getElementById('lang-' + lang);
                if (activeBtn) activeBtn.classList.add('active');
            }, 200);
        });
        
        // SOS functionality with backend notification
        async function triggerSOS() {
            const sosBtn = document.getElementById('sosButton');
            const originalText = sosBtn.innerHTML;
            
            // Show loading state
            sosBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Sending SOS...</span>';
            sosBtn.disabled = true;
            
            try {
                // Get user location if available
                let locationData = null;
                if (navigator.geolocation) {
                    locationData = await getCurrentLocation();
                }
                
                const sosData = {
                    timestamp: new Date().toISOString(),
                    page: 'tourist_login',
                    language: '{{ current_language or "en" }}',
                    user_agent: navigator.userAgent,
                    location: locationData,
                    emergency_type: 'SOS_REQUEST',
                    message: getSosMessage('{{ current_language or "en" }}')
                };
                
                // Send SOS to backend
                const response = await fetch('/api/emergency/sos', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(sosData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Show success state
                    sosBtn.innerHTML = '<i class="fas fa-check"></i> <span>SOS Sent</span>';
                    sosBtn.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
                    
                    // Show notification badge
                    showNotificationBadge();
                    
                    // Show success alert
                    alert(getSosSuccessMessage('{{ current_language or "en" }}'));
                    
                    // Auto-dial emergency number after confirmation
                    if (confirm(getEmergencyCallMessage('{{ current_language or "en" }}'))) {
                        window.location.href = 'tel:112';
                    }
                } else {
                    throw new Error(result.error || 'SOS request failed');
                }
                
            } catch (error) {
                console.error('SOS Error:', error);
                sosBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>SOS Failed</span>';
                sosBtn.style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
                alert(getSosErrorMessage('{{ current_language or "en" }}'));
            } finally {
                sosBtn.disabled = false;
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    sosBtn.innerHTML = originalText;
                    sosBtn.style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
                }, 3000);
            }
        }
        
        // Get current location
        function getCurrentLocation() {
            return new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        resolve({
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy,
                            timestamp: position.timestamp
                        });
                    },
                    (error) => {
                        resolve(null); // Don't reject, just return null
                    },
                    { timeout: 5000, enableHighAccuracy: true }
                );
            });
        }
        
        // Show notification badge
        function showNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            badge.style.display = 'flex';
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                badge.style.display = 'none';
            }, 10000);
        }
        
        // Language-specific messages
        function getSosMessage(language) {
            const messages = {
                'hi': '‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® SOS ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß - ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ',
                'ta': '‡ÆÖ‡Æµ‡Æö‡Æ∞ SOS ‡Æï‡Øã‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà - ‡Æâ‡Æü‡Æ©‡Æü‡Æø ‡Æâ‡Æ§‡Æµ‡Æø ‡Æ§‡Øá‡Æµ‡Øà',
                'te': '‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ SOS ‡∞Ö‡∞≠‡±ç‡∞Ø‡∞∞‡±ç‡∞•‡∞® - ‡∞§‡∞ï‡±ç‡∞∑‡∞£ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç',
                'bn': '‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø SOS ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß - ‡¶§‡¶æ‡ßé‡¶ï‡ßç‡¶∑‡¶£‡¶ø‡¶ï ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®',
                'mr': '‡§Ü‡§£‡•Ä‡§¨‡§æ‡§£‡•Ä‡§ö‡•Ä SOS ‡§µ‡§ø‡§®‡§Ç‡§§‡•Ä - ‡§§‡§æ‡§§‡§°‡•Ä‡§ö‡•Ä ‡§Æ‡§¶‡§§ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï',
                'gu': '‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä SOS ‡™µ‡™ø‡™®‡™Ç‡™§‡´Ä - ‡™§‡™æ‡™§‡´ç‡™ï‡™æ‡™≤‡™ø‡™ï ‡™Æ‡™¶‡™¶ ‡™ú‡™∞‡´Ç‡™∞‡´Ä',
                'kn': '‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å SOS ‡≤µ‡≤ø‡≤®‡≤Ç‡≤§‡≤ø - ‡≤§‡≤ï‡≥ç‡≤∑‡≤£‡≤¶ ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø',
                'ml': '‡¥é‡¥Æ‡µº‡¥ú‡µª‡¥∏‡¥ø SOS ‡¥Ö‡¥≠‡µç‡¥Ø‡µº‡¥§‡µç‡¥•‡¥® - ‡¥â‡¥ü‡¥®‡¥ü‡¥ø ‡¥∏‡¥π‡¥æ‡¥Ø‡¥Ç ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Ç',
                'pa': '‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä SOS ‡®¨‡©á‡®®‡®§‡©Ä - ‡®§‡©Å‡®∞‡©∞‡®§ ‡®Æ‡®¶‡®¶ ‡®¶‡©Ä ‡®≤‡©ã‡©ú',
                'or': '‡¨ú‡¨∞‡≠Å‡¨∞‡≠Ä‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® SOS ‡¨Ö‡¨®‡≠Å‡¨∞‡≠ã‡¨ß - ‡¨§‡¨§‡¨ï‡≠ç‡¨∑‡¨£‡¨æ‡¨§ ‡¨∏‡¨æ‡¨π‡¨æ‡¨Ø‡≠ç‡≠ü ‡¨Ü‡¨¨‡¨∂‡≠ç‡≠ü‡¨ï',
                'as': '‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® SOS ‡¶Ö‡¶®‡ßÅ‡ß∞‡ßã‡¶ß - ‡¶§‡ßé‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡ßé ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º ‡¶™‡ßç‡ß∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®',
                'en': 'Emergency SOS Request - Immediate assistance needed'
            };
            return messages[language] || messages['en'];
        }
        
        function getSosSuccessMessage(language) {
            const messages = {
                'hi': 'SOS ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ! ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§',
                'ta': 'SOS ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ! ‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æï‡Ææ‡Æ≤ ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡ØÜ‡Æ∞‡Æø‡Æµ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ‡•§',
                'te': 'SOS ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞™‡∞Ç‡∞™‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞∏‡±á‡∞µ‡∞≤‡∞ï‡±Å ‡∞§‡±Ü‡∞≤‡∞ø‡∞Ø‡∞ú‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø‡•§',
                'bn': 'SOS ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡ßá‡¶¨‡¶æ‡¶ó‡ßÅ‡¶≤‡¶ø‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§',
                'mr': 'SOS ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§™‡§æ‡§†‡§µ‡§≤‡•á! ‡§Ü‡§£‡•Ä‡§¨‡§æ‡§£‡•Ä ‡§∏‡•á‡§µ‡§æ‡§Ç‡§®‡§æ ‡§ï‡§≥‡§µ‡§≤‡•á ‡§Ü‡§π‡•á‡•§',
                'gu': 'SOS ‡™∏‡™´‡™≥‡™§‡™æ‡™™‡´Ç‡™∞‡´ç‡™µ‡™ï ‡™Æ‡´ã‡™ï‡™≤‡™æ‡™Ø‡´Å‡™Ç! ‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä ‡™∏‡´á‡™µ‡™æ‡™ì‡™®‡´á ‡™ú‡™æ‡™£ ‡™ï‡™∞‡´Ä ‡™¶‡´á‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™Ü‡™µ‡´Ä ‡™õ‡´á‡•§',
                'kn': 'SOS ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤µ‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü! ‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å ‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤§‡≤ø‡≤≥‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü‡•§',
                'ml': 'SOS ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥Ø‡¥ö‡µç‡¥ö‡µÅ! ‡¥é‡¥Æ‡µº‡¥ú‡µª‡¥∏‡¥ø ‡¥∏‡µá‡¥µ‡¥®‡¥ô‡µç‡¥ô‡¥≥‡µÜ ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥ø‡¥ö‡µç‡¥ö‡¥ø‡¥ü‡µç‡¥ü‡µÅ‡¥£‡µç‡¥ü‡µç‡•§',
                'pa': 'SOS ‡®∏‡®´‡®≤‡®§‡®æ‡®™‡©Ç‡®∞‡®µ‡®ï ‡®≠‡©á‡®ú‡®ø‡®Ü ‡®ó‡®ø‡®Ü! ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®∏‡©á‡®µ‡®æ‡®µ‡®æ‡®Ç ‡®®‡©Ç‡©∞ ‡®∏‡©Ç‡®ö‡®ø‡®§ ‡®ï‡©Ä‡®§‡®æ ‡®ó‡®ø‡®Ü ‡®π‡©à‡•§',
                'or': 'SOS ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨™‡¨†‡¨æ‡¨ó‡¨≤‡¨æ! ‡¨ú‡¨∞‡≠Å‡¨∞‡≠Ä‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® ‡¨∏‡≠á‡¨¨‡¨æ‡¨ó‡≠Å‡¨°‡¨º‡¨ø‡¨ï‡≠Å ‡¨∏‡≠Ç‡¨ö‡¨ø‡¨§ ‡¨ï‡¨∞‡¨æ‡¨ó‡¨≤‡¨æ‡•§',
                'as': 'SOS ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶†‡¶ø‡¶ì‡ß±‡¶æ ‡¶π‡ßà‡¶õ‡ßá! ‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶∏‡ßá‡ß±‡¶æ‡¶∏‡¶Æ‡ßÇ‡¶π‡¶ï ‡¶ú‡¶®‡ßã‡ß±‡¶æ ‡¶π‡ßà‡¶õ‡ßá‡•§',
                'en': 'SOS sent successfully! Emergency services have been notified.'
            };
            return messages[language] || messages['en'];
        }
        
        function getEmergencyCallMessage(language) {
            const messages = {
                'hi': '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ö‡§¨ ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§Ç‡§¨‡§∞ 112 ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                'ta': '‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æï‡Ææ‡Æ≤ ‡Æé‡Æ£‡Øç 112 ‡Æê ‡ÆÖ‡Æ¥‡Øà‡Æï‡Øç‡Æï ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Ææ?',
                'te': '‡∞Æ‡±Ä‡∞∞‡±Å ‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç 112 ‡∞ï‡±Å ‡∞ï‡∞æ‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞®‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ?',
                'bn': '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶ñ‡¶® ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ 112 ‡¶è ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                'mr': '‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Ü‡§§‡§æ ‡§Ü‡§£‡•Ä‡§¨‡§æ‡§£‡•Ä ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 112 ‡§µ‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•Ç ‡§á‡§ö‡•ç‡§õ‡§ø‡§§‡§æ?',
                'gu': '‡™∂‡´Å‡™Ç ‡™§‡™Æ‡´á ‡™π‡™µ‡´á ‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä ‡™®‡™Ç‡™¨‡™∞ 112 ‡™™‡™∞ ‡™ï‡´â‡™≤ ‡™ï‡™∞‡™µ‡™æ ‡™Æ‡™æ‡™Ç‡™ó‡´ã ‡™õ‡´ã?',
                'kn': '‡≤®‡≥Ä‡≤µ‡≥Å ‡≤à‡≤ó ‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü 112 ‡≤ó‡≥Ü ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤¨‡≤Ø‡≤∏‡≥Å‡≤µ‡≤ø‡≤∞‡≤æ?',
                'ml': '‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥é‡¥Æ‡µº‡¥ú‡µª‡¥∏‡¥ø ‡¥®‡¥Æ‡µç‡¥™‡µº 112 ‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥µ‡¥ø‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥Ü‡¥ó‡µç‡¥∞‡¥π‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ‡¥£‡µç‡¥ü‡µã?',
                'pa': '‡®ï‡©Ä ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®π‡©Å‡®£ ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®®‡©∞‡®¨‡®∞ 112 ‡®§‡©á ‡®ï‡®æ‡®≤ ‡®ï‡®∞‡®®‡®æ ‡®ö‡®æ‡®π‡©Å‡©∞‡®¶‡©á ‡®π‡©ã?',
                'or': '‡¨Ü‡¨™‡¨£ ‡¨¨‡¨∞‡≠ç‡¨§‡≠ç‡¨§‡¨Æ‡¨æ‡¨® ‡¨ú‡¨∞‡≠Å‡¨∞‡≠Ä‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞ 112 ‡¨ï‡≠Å ‡¨ï‡¨≤ ‡¨ï‡¨∞‡¨ø‡¨¨‡¨æ‡¨ï‡≠Å ‡¨ö‡¨æ‡¨π‡≠Å‡¨Å‡¨õ‡¨®‡≠ç‡¨§‡¨ø ‡¨ï‡¨ø?',
                'as': '‡¶Ü‡¶™‡ßÅ‡¶®‡¶ø ‡¶è‡¶§‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡ß∞ 112 ‡¶≤‡ßà ‡¶ï‡¶≤ ‡¶ï‡ß∞‡¶ø‡¶¨ ‡¶¨‡¶ø‡¶ö‡¶æ‡ß∞‡ßá ‡¶®‡ßá‡¶ï‡¶ø?',
                'en': 'Do you want to call emergency number 112 now?'
            };
            return messages[language] || messages['en'];
        }
        
        function getSosErrorMessage(language) {
            const messages = {
                'hi': 'SOS ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Ä‡§ß‡•á 112 ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'ta': 'SOS ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà. ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æ®‡Øá‡Æ∞‡Æü‡Æø‡ÆØ‡Ææ‡Æï 112 ‡Æê ‡ÆÖ‡Æ¥‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
                'te': 'SOS ‡∞™‡∞Ç‡∞™‡∞°‡∞Ç‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞®‡±á‡∞∞‡±Å‡∞ó‡∞æ 112 ‡∞ï‡±Å ‡∞ï‡∞æ‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø‡•§',
                'bn': 'SOS ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø 112 ‡¶è ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                'mr': 'SOS ‡§™‡§æ‡§†‡§µ‡§£‡•ç‡§Ø‡§æ‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§•‡•á‡§ü 112 ‡§µ‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§æ‡•§',
                'gu': 'SOS ‡™Æ‡´ã‡™ï‡™≤‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™≠‡´Ç‡™≤. ‡™ï‡´É‡™™‡™æ ‡™ï‡™∞‡´Ä‡™®‡´á ‡™∏‡´Ä‡™ß‡™æ 112 ‡™™‡™∞ ‡™ï‡´â‡™≤ ‡™ï‡™∞‡´ã.',
                'kn': 'SOS ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≥Å‡≤µ‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¶‡≥ã‡≤∑. ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤®‡≥á‡≤∞‡≤µ‡≤æ‡≤ó‡≤ø 112 ‡≤ó‡≥Ü ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø‡•§',
                'ml': 'SOS ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡¥ø‡µΩ ‡¥™‡¥ø‡¥∂‡¥ï‡µç. ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥®‡µá‡¥∞‡¥ø‡¥ü‡µç‡¥ü‡µç 112 ‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥µ‡¥ø‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.',
                'pa': 'SOS ‡®≠‡©á‡®ú‡®£ ‡®µ‡®ø‡©±‡®ö ‡®ó‡®≤‡®§‡©Ä‡•§ ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®∏‡®ø‡©±‡®ß‡©á 112 ‡®§‡©á ‡®ï‡®æ‡®≤ ‡®ï‡®∞‡©ã‡•§',
                'or': 'SOS ‡¨™‡¨†‡¨æ‡¨á‡¨¨‡¨æ‡¨∞‡≠á ‡¨§‡≠ç‡¨∞‡≠Å‡¨ü‡¨ø‡•§ ‡¨¶‡≠ü‡¨æ‡¨ï‡¨∞‡¨ø ‡¨∏‡¨ø‡¨ß‡¨æ‡¨∏‡¨≥‡¨ñ 112 ‡¨ï‡≠Å ‡¨ï‡¨≤ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'as': 'SOS ‡¶™‡¶†‡ßã‡ß±‡¶æ‡¶§ ‡¶§‡ßç‡ß∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡ß∞‡¶π ‡¶ï‡ß∞‡¶ø ‡¶™‡ßã‡¶®‡¶™‡¶ü‡ßÄ‡¶Ø‡¶º‡¶æ‡¶ï‡ßà 112 ‡¶≤‡ßà ‡¶ï‡¶≤ ‡¶ï‡ß∞‡¶ï‡•§',
                'en': 'Error sending SOS. Please call 112 directly.'
            };
            return messages[language] || messages['en'];
        }
        
        // Initialize page with current language
        document.addEventListener('DOMContentLoaded', function() {
            const currentLang = '{{ current_language or "en" }}';
            
            // Set language selector
            const languageSelect = document.getElementById('languageSelect');
            if (languageSelect) {
                languageSelect.value = currentLang;
            }
            
            // Store language preference
            localStorage.setItem('preferred_language', currentLang);
            
            // Show welcome message based on language
            setTimeout(() => {
                let welcomeMessage = 'Welcome to Tourist Safety System!';
                if (currentLang === 'hi') {
                    welcomeMessage = '‡§™‡§∞‡•ç‡§Ø‡§ü‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!';
                } else if (currentLang === 'ta') {
                    welcomeMessage = '‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ ‡Æ™‡Ææ‡Æ§‡ØÅ◊ß‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡ÆÖ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡Æø‡Æ≤‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç!';
                } else if (currentLang === 'te') {
                    welcomeMessage = '‡∞ü‡±Ç‡∞∞‡∞ø‡∞∏‡±ç‡∞ü‡±ç ‡∞∏‡±á‡∞´‡±ç‡∞ü‡∞ø ‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡∞Æ‡±ç‚Äå‡∞ï‡±Å ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç!';
                }
                
                if (typeof showUserCaution === 'function') {
                    showUserCaution('welcome', 'üëã Welcome', welcomeMessage, 'info');
                }
            }, 1000);
        });
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeTranslations();
        });

        // Initialize translations
        async function initializeTranslations() {
            try {
                await loadTranslations();
            } catch (error) {
                console.error('Error initializing translations:', error);
            }
        }

        // Handle login form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const touristId = document.getElementById('touristId').value.trim();
            const loginBtn = document.getElementById('loginBtn');
            const spinner = document.querySelector('.loading-spinner');
            const messageDiv = document.getElementById('message');
            
            if (!touristId) {
                showMessage('Please enter your Tourist ID', 'error');
                return;
            }
            
            // Show loading state
            loginBtn.disabled = true;
            spinner.style.display = 'inline-block';
            messageDiv.innerHTML = '';
            
            try {
                const response = await apiRequest('/api/tourist_login', {
                    method: 'POST',
                    body: JSON.stringify({
                        tourist_id: touristId
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    showMessage(data.message, 'success');
                    setTimeout(() => {
                        window.location.href = data.redirect_url;
                    }, 1000);
                } else {
                    showMessage(data.error || 'Login failed', 'error');
                }
                
            } catch (error) {
                console.error('Login error:', error);
                showMessage('Network error. Please try again.', 'error');
            } finally {
                loginBtn.disabled = false;
                spinner.style.display = 'none';
            }
        });

        // Show message function
        function showMessage(message, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="${type}-message">${message}</div>`;
        }

        // Emergency modal functions
        function showEmergencyModal() {
            document.getElementById('emergencyModal').style.display = 'block';
        }

        function closeEmergencyModal() {
            document.getElementById('emergencyModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('emergencyModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>